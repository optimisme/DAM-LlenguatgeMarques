<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Basic Room 1 - Colors</title>
    <link rel="stylesheet" href="../../game-styles.css">
</head>
<body>
    <div id="game-container"></div>

    <script src="../../progress.js"></script>
    <script src="../../game-engine.js"></script>
    <script>
        startRoom({
            chapterId: 'chapter-css-basic',
            roomId: 'room1',
            title: 'ðŸŽ¨ Colors & Backgrounds',
            description: 'Learn to change colors using CSS properties',
            instructions: `The heading is hard to read! Change the <code>color</code> property to make the text visible, and add a nice <code>background-color</code> to the box.`,

            htmlEditable: false,
            cssEditable: true,

            initialHTML: `<div class="card">
    <h1>Welcome!</h1>
    <p>This is a styled card.</p>
</div>`,

            initialCSS: `/* Make the heading visible and add background to the card */
.card {
    padding: 20px;
    border-radius: 8px;
    background-color: white;
}

h1 {
    color: white;
}

p {
    color: #666;
}`,

            hints: [
                'Change <code>color: white;</code> to something visible like <code>color: #333;</code>',
                'Try <code>background-color: #3498db;</code> for the card',
                'Color can be: names (red, blue), hex (#ff0000), or rgb(255,0,0)'
            ],

            validate: function({ doc, css }) {
                const h1 = doc.querySelector('h1');
                const card = doc.querySelector('.card');

                if (!h1 || !card) return { success: false, message: 'Something went wrong!' };

                const h1Style = window.getComputedStyle ? doc.defaultView.getComputedStyle(h1) : h1.currentStyle;
                const cardStyle = window.getComputedStyle ? doc.defaultView.getComputedStyle(card) : card.currentStyle;

                const h1Color = h1Style.color;
                const cardBg = cardStyle.backgroundColor;

                // Check h1 is not white
                const h1Rgb = h1Color.match(/\d+/g);
                if (h1Rgb && parseInt(h1Rgb[0]) > 250 && parseInt(h1Rgb[1]) > 250 && parseInt(h1Rgb[2]) > 250) {
                    return { success: false, message: 'The heading is still white! Change its color.' };
                }

                // Check card has background
                const cardRgb = cardBg.match(/\d+/g);
                if (cardRgb && parseInt(cardRgb[0]) > 250 && parseInt(cardRgb[1]) > 250 && parseInt(cardRgb[2]) > 250) {
                    return { success: false, message: 'Add a colorful background-color to the card!' };
                }

                return { success: true };
            }
        });
    </script>
</body>
</html>
