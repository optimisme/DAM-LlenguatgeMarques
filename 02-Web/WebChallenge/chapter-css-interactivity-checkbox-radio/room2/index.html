<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Interactivity Room 2 - Show/Hide Content</title>
    <link rel="stylesheet" href="../../game-styles.css">
</head>
<body>
    <div id="game-container"></div>

    <script src="../../progress.js"></script>
    <script src="../../game-engine.js"></script>
    <script>
        startRoom({
            chapterId: 'chapter-css-interactivity-checkbox-radio',
            roomId: 'room2',
            title: 'üëÅÔ∏è Show/Hide Content',
            description: 'Toggle content visibility with CSS only',
            instructions: `The secret box should be hidden by default (<code>display: none</code>). When the checkbox is checked, show it (<code>display: block</code>) using the <code>:checked</code> selector!`,

            htmlEditable: false,
            cssEditable: true,

            initialHTML: `<div class="reveal-container">
    <label class="reveal-label">
        <input type="checkbox" class="reveal-checkbox">
        <span>Reveal the secret</span>
    </label>

    <div class="secret-box">
        <p>The password is: CSSMAGIC</p>
    </div>
</div>`,

            initialCSS: `/* Hide the secret by default, show when checked */
.reveal-container {
    text-align: center;
    padding: 30px;
}

.reveal-label {
    display: block;
    margin-bottom: 20px;
    cursor: pointer;
    font-size: 18px;
}

.reveal-checkbox {
    width: 20px;
    height: 20px;
    margin-right: 10px;
}

.secret-box {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 30px;
    border-radius: 12px;
    max-width: 300px;
    margin: 0 auto;
    /* Add display: none here */
}

.secret-box p {
    margin: 0;
    font-size: 20px;
    font-weight: bold;
}

/* Add :checked rule to show the secret-box */
`,

            hints: [
                'First hide by default: <code>.secret-box { display: none; }</code>',
                'Then show when checked: <code>.reveal-checkbox:checked ~ .secret-box { display: block; }</code>',
                'The ~ selector targets siblings after the checkbox'
            ],

            validate: function({ doc, css }) {
                const checkbox = doc.querySelector('.reveal-checkbox');
                const secretBox = doc.querySelector('.secret-box');

                if (!checkbox || !secretBox) {
                    return { success: false, message: 'Elements not found!' };
                }

                // Check unchecked state
                checkbox.checked = false;
                let uncheckedDisplay = doc.defaultView.getComputedStyle(secretBox).display;

                // Check checked state
                checkbox.checked = true;
                let checkedDisplay = doc.defaultView.getComputedStyle(secretBox).display;

                if (uncheckedDisplay !== 'none') {
                    return { success: false, message: 'The secret-box should be hidden (display: none) by default!' };
                }

                if (checkedDisplay === 'none') {
                    return { success: false, message: 'Show the secret-box when the checkbox is checked!' };
                }

                return { success: true };
            }
        });
    </script>
</body>
</html>
