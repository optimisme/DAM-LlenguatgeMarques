<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Interactivity Room 3 - Radio Tabs</title>
    <link rel="stylesheet" href="../../game-styles.css">
</head>
<body>
    <div id="game-container"></div>

    <script src="../../progress.js"></script>
    <script src="../../game-engine.js"></script>
    <script>
        startRoom({
            chapterId: 'chapter-css-interactivity-checkbox-radio',
            roomId: 'room3',
            title: 'ðŸ“‘ CSS-Only Tabs',
            description: 'Build a tabbed interface with radio buttons',
            instructions: `Create tabs using radio buttons! Hide all panels by default, then use <code>#tab1:checked ~ .tab-panels #panel1</code> pattern to show the correct panel when its tab is selected.`,

            htmlEditable: false,
            cssEditable: true,

            initialHTML: `<div class="tabs-container">
    <input type="radio" name="tabs" id="tab1" class="tab-radio" checked>
    <input type="radio" name="tabs" id="tab2" class="tab-radio">
    <input type="radio" name="tabs" id="tab3" class="tab-radio">

    <div class="tab-buttons">
        <label for="tab1" class="tab-btn">Room A</label>
        <label for="tab2" class="tab-btn">Room B</label>
        <label for="tab3" class="tab-btn">Room C</label>
    </div>

    <div class="tab-panels">
        <div class="tab-panel" id="panel1">
            <h3>Room A</h3>
            <p>Welcome to Room A. The first key fragment is here.</p>
        </div>
        <div class="tab-panel" id="panel2">
            <h3>Room B</h3>
            <p>Room B contains the second key fragment.</p>
        </div>
        <div class="tab-panel" id="panel3">
            <h3>Room C</h3>
            <p>The final fragment awaits in Room C!</p>
        </div>
    </div>
</div>`,

            initialCSS: `/* Create CSS-only tabs */
.tabs-container {
    max-width: 400px;
}

.tab-radio {
    display: none;
}

.tab-buttons {
    display: flex;
    gap: 5px;
    margin-bottom: 0;
}

.tab-btn {
    flex: 1;
    padding: 12px 20px;
    background: #34495e;
    color: white;
    text-align: center;
    cursor: pointer;
    border-radius: 8px 8px 0 0;
    transition: background 0.3s;
}

.tab-btn:hover {
    background: #4a6278;
}

.tab-panels {
    background: #2c3e50;
    padding: 20px;
    border-radius: 0 0 8px 8px;
}

.tab-panel {
    color: white;
    /* Hide all panels by default */
}

.tab-panel h3 {
    margin-top: 0;
}

/* Show panel when corresponding tab is checked */
/* Use: #tab1:checked ~ .tab-panels #panel1 */
`,

            hints: [
                'First hide all panels: <code>.tab-panel { display: none; }</code>',
                'Show panel 1: <code>#tab1:checked ~ .tab-panels #panel1 { display: block; }</code>',
                'Repeat for tab2/panel2 and tab3/panel3'
            ],

            validate: function({ doc, css }) {
                const tab1 = doc.getElementById('tab1');
                const tab2 = doc.getElementById('tab2');
                const panel1 = doc.getElementById('panel1');
                const panel2 = doc.getElementById('panel2');

                if (!tab1 || !tab2 || !panel1 || !panel2) {
                    return { success: false, message: 'Tab elements not found!' };
                }

                // Test tab 1
                tab1.checked = true;
                tab2.checked = false;

                const panel1Display = doc.defaultView.getComputedStyle(panel1).display;
                const panel2Display = doc.defaultView.getComputedStyle(panel2).display;

                if (panel1Display === 'none') {
                    return { success: false, message: 'Panel 1 should be visible when Tab 1 is selected!' };
                }

                if (panel2Display !== 'none') {
                    return { success: false, message: 'Panel 2 should be hidden when Tab 1 is selected!' };
                }

                // Test tab 2
                tab1.checked = false;
                tab2.checked = true;

                const panel1Display2 = doc.defaultView.getComputedStyle(panel1).display;
                const panel2Display2 = doc.defaultView.getComputedStyle(panel2).display;

                if (panel1Display2 !== 'none') {
                    return { success: false, message: 'Panel 1 should be hidden when Tab 2 is selected!' };
                }

                if (panel2Display2 === 'none') {
                    return { success: false, message: 'Panel 2 should be visible when Tab 2 is selected!' };
                }

                return { success: true };
            }
        });
    </script>
</body>
</html>
