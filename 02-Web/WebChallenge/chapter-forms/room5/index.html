<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forms Room 5 - Accessible Form</title>
    <link rel="stylesheet" href="../../game-styles.css">
</head>
<body>
    <div id="game-container"></div>

    <script src="../../progress.js"></script>
    <script src="../../game-engine.js"></script>
    <script>
        startRoom({
            chapterId: 'chapter-forms',
            roomId: 'room5',
            title: 'üèÜ Accessible Form Challenge',
            description: 'Fix all accessibility issues in this form',
            instructions: `Fix all issues in this form:
<br>1. Add <code>for</code> attributes to all labels
<br>2. Change email input to <code>type="email"</code>
<br>3. Change password input to <code>type="password"</code>
<br>4. Add <code>required</code> attribute to all inputs`,

            htmlEditable: true,
            cssEditable: false,

            initialHTML: `<form class="registration-form">
    <div class="form-group">
        <label>Name</label>
        <input type="text" id="reg-name" name="name" placeholder="John Doe">
    </div>

    <div class="form-group">
        <label>Email</label>
        <input type="text" id="reg-email" name="email" placeholder="john@example.com">
    </div>

    <div class="form-group">
        <label>Password</label>
        <input type="text" id="reg-password" name="password" placeholder="********">
    </div>

    <button type="submit" class="submit-btn">Register</button>
</form>`,

            initialCSS: `
.registration-form {
    max-width: 300px;
}

.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #2c3e50;
}

input {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 16px;
    box-sizing: border-box;
}

input:focus {
    border-color: #3498db;
    outline: none;
}

.submit-btn {
    background: #27ae60;
    color: white;
    border: none;
    padding: 12px 30px;
    font-size: 16px;
    border-radius: 6px;
    cursor: pointer;
    width: 100%;
}

.submit-btn:hover {
    background: #219a52;
}`,

            hints: [
                'Labels: <code>&lt;label for="reg-name"&gt;</code>, etc.',
                'Email: <code>type="email"</code>, Password: <code>type="password"</code>',
                'Required: add <code>required</code> attribute to each input'
            ],

            validate: function({ doc, html }) {
                const labels = doc.querySelectorAll('label');
                const nameInput = doc.getElementById('reg-name');
                const emailInput = doc.getElementById('reg-email');
                const passwordInput = doc.getElementById('reg-password');

                // Check labels
                let labelsOk = true;
                labels.forEach(label => {
                    if (!label.getAttribute('for')) labelsOk = false;
                });

                if (!labelsOk) {
                    return { success: false, message: 'Add for attributes to all labels!' };
                }

                // Check types
                if (!emailInput || emailInput.type !== 'email') {
                    return { success: false, message: 'Change email input to type="email"!' };
                }

                if (!passwordInput || passwordInput.type !== 'password') {
                    return { success: false, message: 'Change password input to type="password"!' };
                }

                // Check required
                if (!nameInput.required || !emailInput.required || !passwordInput.required) {
                    return { success: false, message: 'Add required attribute to all inputs!' };
                }

                return { success: true };
            }
        });
    </script>
</body>
</html>
