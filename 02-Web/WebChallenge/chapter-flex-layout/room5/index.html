<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flex Layout Room 5 - Sidebar Layout</title>
    <link rel="stylesheet" href="../../game-styles.css">
</head>
<body>
    <div id="game-container"></div>

    <script src="../../progress.js"></script>
    <script src="../../game-engine.js"></script>
    <script>
        startRoom({
            chapterId: 'chapter-flex-layout',
            roomId: 'room5',
            title: 'üìê Sidebar Layout',
            description: 'Build a classic sidebar + content layout with Flexbox',
            instructions: `Create a sidebar layout! The sidebar should be fixed width (200px), and the content should expand to fill remaining space with <code>flex: 1;</code>`,

            htmlEditable: false,
            cssEditable: true,

            initialHTML: `<div class="layout">
    <aside class="sidebar">
        <h3>Sidebar</h3>
        <ul>
            <li>Link 1</li>
            <li>Link 2</li>
            <li>Link 3</li>
        </ul>
    </aside>
    <main class="content">
        <h3>Main Content</h3>
        <p>This area should expand to fill all available space.</p>
    </main>
</div>`,

            initialCSS: `/* Create a sidebar layout */
.layout {
    background: #ecf0f1;
    min-height: 250px;
    border-radius: 12px;
    overflow: hidden;
}

.sidebar {
    background: #34495e;
    color: white;
    padding: 15px;
}

.sidebar h3 {
    margin-top: 0;
}

.sidebar ul {
    list-style: none;
    padding: 0;
}

.sidebar li {
    padding: 8px 0;
    border-bottom: 1px solid #4a6278;
}

.content {
    padding: 20px;
}

.content h3 {
    margin-top: 0;
    color: #2c3e50;
}`,

            hints: [
                'Add <code>display: flex;</code> to .layout',
                'Give .sidebar a fixed width: <code>width: 200px;</code>',
                'Make .content grow with: <code>flex: 1;</code>'
            ],

            validate: function({ doc, css }) {
                const layout = doc.querySelector('.layout');
                const sidebar = doc.querySelector('.sidebar');
                const content = doc.querySelector('.content');

                if (!layout || !sidebar || !content) {
                    return { success: false, message: 'Layout elements not found!' };
                }

                const layoutStyle = doc.defaultView.getComputedStyle(layout);
                const sidebarStyle = doc.defaultView.getComputedStyle(sidebar);
                const contentStyle = doc.defaultView.getComputedStyle(content);

                if (layoutStyle.display !== 'flex') {
                    return { success: false, message: 'Add display: flex; to .layout!' };
                }

                const sidebarWidth = parseInt(sidebarStyle.width);
                if (sidebarWidth < 150) {
                    return { success: false, message: 'Give .sidebar a fixed width (at least 150px)!' };
                }

                const contentFlexGrow = parseFloat(contentStyle.flexGrow);
                if (contentFlexGrow < 1) {
                    return { success: false, message: 'Add flex: 1; to .content so it fills remaining space!' };
                }

                return { success: true };
            }
        });
    </script>
</body>
</html>
